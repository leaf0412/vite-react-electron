# Vite React Electron

ä¸€ä¸ªç°ä»£åŒ–çš„ Vite + React + Electron æ¡Œé¢åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ã€‚

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Version](https://img.shields.io/badge/version-0.0.6-green.svg)](https://github.com/leaf0412/vite-react-electron)

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªé›†æˆäº†æœ€æ–°æŠ€æœ¯æ ˆçš„æ¡Œé¢åº”ç”¨å¼€å‘æ¨¡æ¿ï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„é…ç½®å’Œå·¥å…·é“¾ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºé«˜æ€§èƒ½ã€ç¾è§‚çš„è·¨å¹³å°æ¡Œé¢åº”ç”¨ã€‚

## ğŸ”¥ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: React 18
- **æ„å»ºå·¥å…·**: Vite 6
- **æ¡Œé¢æ¡†æ¶**: Electron 31
- **UI ç»„ä»¶åº“**: Ant Design 5
- **è·¯ç”±**: React Router DOM 7
- **çŠ¶æ€ç®¡ç†**: æ”¯æŒé›†æˆReduxï¼ˆå·²é…ç½®ï¼‰
- **å›½é™…åŒ–**: i18next + react-i18next
- **å¼€å‘è¯­è¨€**: TypeScript 5
- **ä»£ç è§„èŒƒ**: ESLint
- **Git è§„èŒƒ**: Commitlint
- **è‡ªåŠ¨å‘å¸ƒ**: release-it
- **è‡ªåŠ¨æ›´æ–°**: electron-updater

## âœ¨ ç‰¹æ€§

- âš¡ï¸ åŸºäº Vite çš„æé€Ÿçƒ­é‡è½½å¼€å‘ä½“éªŒ
- ğŸŒ å†…ç½®å›½é™…åŒ–æ”¯æŒï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰
- ğŸ¯ TypeScript å…¨é¢ç±»å‹æ”¯æŒ
- ğŸ“¦ ä¼˜åŒ–çš„ Electron é…ç½®ä¸æ‰“åŒ…è®¾ç½®
- ğŸ” ESLint ä»£ç æ£€æŸ¥ä¸è‡ªåŠ¨ä¿®å¤
- ğŸš€ ä¸€é”®æ„å»ºä¸å‘å¸ƒæµç¨‹
- ğŸ“ æ ‡å‡†åŒ–çš„ Git æäº¤ä¿¡æ¯æ ¼å¼
- ğŸ”„ åº”ç”¨å†…è‡ªåŠ¨æ›´æ–°æ”¯æŒ
- ğŸ“‚ æ–‡ä»¶ç®¡ç†ç»„ä»¶ç¤ºä¾‹
- ğŸ§© æ¨¡å—åŒ–çš„é¡¹ç›®ç»“æ„

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åˆ›å»ºé¡¹ç›®

```bash
git clone https://github.com/leaf0412/vite-react-electron.git

cd vite-react-electron
```

### å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### æ„å»º

```bash
# æ„å»ºåº”ç”¨
npm run build

# æ„å»ºå¹¶æ‰“åŒ…åº”ç”¨
npm run package
```

### å‘å¸ƒç‰ˆæœ¬

```bash
# è‡ªåŠ¨å‘å¸ƒæ–°ç‰ˆæœ¬
npm run release

# ä»…æµ‹è¯•å‘å¸ƒæµç¨‹
npm run release:dry

# æŒ‡å®šç‰ˆæœ¬çº§åˆ«å‘å¸ƒ
npm run release:patch  # è¡¥ä¸ç‰ˆæœ¬
npm run release:minor  # æ¬¡è¦ç‰ˆæœ¬
npm run release:major  # ä¸»è¦ç‰ˆæœ¬
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ src/                   # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main/             # Electron ä¸»è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ core/        # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ ipc/         # IPC é€šä¿¡å¤„ç†
â”‚   â”‚   â”œâ”€â”€ services/    # æœåŠ¡æ¨¡å—
â”‚   â”‚   â””â”€â”€ main.ts      # ä¸»è¿›ç¨‹å…¥å£
â”‚   â”œâ”€â”€ preload/          # é¢„åŠ è½½è„šæœ¬
â”‚   â”œâ”€â”€ renderer/         # æ¸²æŸ“è¿›ç¨‹ï¼ˆReactï¼‰
â”‚   â”‚   â”œâ”€â”€ assets/      # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ components/  # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/       # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layouts/     # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/      # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ i18n/        # å›½é™…åŒ–
â”‚   â”‚   â”œâ”€â”€ store/       # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ bridge/      # ä¸»è¿›ç¨‹é€šä¿¡æ¡¥æ¥
â”‚   â”‚   â”œâ”€â”€ utils/       # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ App.tsx      # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ shared/           # å…±äº«ä»£ç 
â”‚   â””â”€â”€ types/            # ç±»å‹å®šä¹‰
â”œâ”€â”€ public/                # é™æ€èµ„æºç›®å½•
â”œâ”€â”€ electron-builder.json5 # Electron æ„å»ºé…ç½®
â”œâ”€â”€ vite.config.ts         # Vite é…ç½®
â”œâ”€â”€ .release-it.json       # å‘å¸ƒé…ç½®
â””â”€â”€ commitlint.config.mjs  # æäº¤è§„èŒƒé…ç½®
```

## âš™ï¸ é…ç½®è¯´æ˜

### Vite é…ç½®

`vite.config.ts` æ–‡ä»¶åŒ…å«äº† Vite çš„é…ç½®ï¼ŒåŒ…æ‹¬æ’ä»¶é…ç½®å’Œæ„å»ºé€‰é¡¹ï¼š

- vite-plugin-electron: å¤„ç† Electron ä¸»è¿›ç¨‹ä»£ç 
- vite-plugin-electron-renderer: å¤„ç†æ¸²æŸ“è¿›ç¨‹ä»£ç 
- @vitejs/plugin-react: React æ”¯æŒ

### Electron æ„å»ºé…ç½®

`electron-builder.json5` åŒ…å«äº†åº”ç”¨æ‰“åŒ…é…ç½®ï¼š

- åº”ç”¨å›¾æ ‡è®¾ç½®
- æ„å»ºç›®æ ‡å¹³å°
- å®‰è£…ç¨‹åºé€‰é¡¹
- è‡ªåŠ¨æ›´æ–°é…ç½®

## ğŸ”„ IPC é€šä¿¡

ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡é€šè¿‡ IPC (è¿›ç¨‹é—´é€šä¿¡) å®ç°ï¼š

1. ä¸»è¿›ç¨‹IPCå¤„ç† (`src/main/ipc/`)
2. é¢„åŠ è½½è„šæœ¬ (`src/preload/`)
3. æ¸²æŸ“è¿›ç¨‹æ¡¥æ¥ (`src/renderer/bridge/`)

## âŒ¨ï¸ å¼€å‘ç¯å¢ƒ

### å‰ç½®è¦æ±‚

- Node.js 18+ 
- npm 9+

### å¸¸ç”¨å‘½ä»¤

- `npm run dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `npm run build` - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- `npm run package` - æ„å»ºå¹¶æ‰“åŒ…åº”ç”¨
- `npm run lint` - è¿è¡Œä»£ç æ£€æŸ¥
- `npm run typecheck` - ç±»å‹æ£€æŸ¥
- `npm run preview` - é¢„è§ˆç”Ÿäº§æ„å»º

## ğŸ”– Git æäº¤è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ Commitlint æ¥è§„èŒƒ Git æäº¤ä¿¡æ¯ï¼Œæ”¯æŒä»¥ä¸‹ç±»å‹ï¼š

- feat: æ–°åŠŸèƒ½
- fix: ä¿®å¤é—®é¢˜
- docs: æ–‡æ¡£ä¿®æ”¹
- style: ä»£ç æ ¼å¼ä¿®æ”¹
- refactor: ä»£ç é‡æ„
- perf: æ€§èƒ½ä¼˜åŒ–
- test: æµ‹è¯•ç›¸å…³
- chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

## ğŸŒŸ ç‰¹è‰²åŠŸèƒ½

### å›½é™…åŒ–æ”¯æŒ

é¡¹ç›®å†…ç½®äº†å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒï¼Œå¯ä»¥è½»æ¾åˆ‡æ¢ä¸­è‹±æ–‡ç•Œé¢ã€‚

- **ä½ç½®**: `src/renderer/i18n/`
- **åŠŸèƒ½**: æä¾›ä¸­è‹±æ–‡è¯­è¨€åˆ‡æ¢ï¼Œè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿè¯­è¨€å¹¶åº”ç”¨
- **æ¥å£**: é€šè¿‡ `useTranslation` é’©å­åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

### è‡ªåŠ¨æ›´æ–°

ä½¿ç”¨ electron-updater å®ç°åº”ç”¨çš„è‡ªåŠ¨æ£€æŸ¥æ›´æ–°å’Œå®‰è£…åŠŸèƒ½ã€‚

- **ä½ç½®**: `src/main/core/upgrade/`
- **åŠŸèƒ½**: è‡ªåŠ¨æ£€æŸ¥æ–°ç‰ˆæœ¬ã€ä¸‹è½½æ›´æ–°ã€å®‰è£…æ›´æ–°
- **é…ç½®**: åœ¨ `electron-builder.json5` ä¸­é…ç½®æ›´æ–°æœåŠ¡å™¨

### æ–‡ä»¶ç®¡ç†ç¤ºä¾‹

å†…ç½®æ–‡ä»¶ç®¡ç†ç»„ä»¶ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ Electron ä¸­è¿›è¡Œæ–‡ä»¶æ“ä½œã€‚

- **ä½ç½®**: `src/renderer/pages/file-manager/` å’Œ `src/main/services/file/`
- **åŠŸèƒ½**: æ–‡ä»¶æµè§ˆã€è¯»å–ã€å†™å…¥ã€åˆ é™¤ç­‰æ“ä½œ
- **é€šä¿¡**: é€šè¿‡ IPC åœ¨æ¸²æŸ“è¿›ç¨‹å’Œä¸»è¿›ç¨‹é—´ä¼ é€’æ–‡ä»¶æ“ä½œæŒ‡ä»¤

## ğŸ“¦ åŠŸèƒ½æ¨¡å—è¯¦è§£

é¡¹ç›®æä¾›äº†å¤šç§åŠŸèƒ½æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰ç‰¹å®šçš„ç”¨é€”å’Œä½ç½®ï¼š

### ä¸»è¿›ç¨‹æ¨¡å— (src/main/)

| æ¨¡å— | ä½ç½® | åŠŸèƒ½æè¿° |
|------|------|----------|
| çª—å£ç®¡ç† | `src/main/core/window/` | ç®¡ç†åº”ç”¨çª—å£çš„åˆ›å»ºã€å…³é—­ã€æœ€å°åŒ–ã€æœ€å¤§åŒ–ç­‰æ“ä½œ |
| å¯¹è¯æ¡† | `src/main/core/dialog/` | æä¾›æ–‡ä»¶é€‰æ‹©ã€æ¶ˆæ¯æç¤ºã€ç¡®è®¤æ¡†ç­‰åŸç”Ÿå¯¹è¯æ¡†åŠŸèƒ½ |
| è‡ªåŠ¨æ›´æ–° | `src/main/core/upgrade/` | åº”ç”¨ç¨‹åºè‡ªåŠ¨æ›´æ–°æ£€æµ‹ä¸å®‰è£… |
| åè®®å¤„ç† | `src/main/core/protocol/` | è‡ªå®šä¹‰åè®®å¤„ç†ï¼Œæ”¯æŒä»URLå¯åŠ¨åº”ç”¨ |
| æ–‡ä»¶æœåŠ¡ | `src/main/services/file/` | æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼ŒåŒ…æ‹¬è¯»å†™ã€å¤åˆ¶ã€ç§»åŠ¨ã€åˆ é™¤ç­‰ |
| ç½‘ç»œé€šä¿¡ | `src/main/network/` | ç½‘ç»œç›¸å…³åŠŸèƒ½ï¼ŒåŒ…æ‹¬UDPå’ŒWebSocketæ”¯æŒ |

### æ¸²æŸ“è¿›ç¨‹æ¨¡å— (src/renderer/)

| æ¨¡å— | ä½ç½® | åŠŸèƒ½æè¿° |
|------|------|----------|
| ä¸»é¡µ | `src/renderer/pages/home/` | åº”ç”¨ä¸»é¡µé¢ï¼Œå±•ç¤ºæ ¸å¿ƒåŠŸèƒ½å…¥å£ |
| å¯åŠ¨é¡µ | `src/renderer/pages/startup/` | åº”ç”¨å¯åŠ¨é¡µï¼Œæ˜¾ç¤ºåŠ è½½è¿›åº¦ |
| çª—å£ç®¡ç† | `src/renderer/pages/window/` | çª—å£æ§åˆ¶ç•Œé¢ç¤ºä¾‹ |
| æ–‡ä»¶ç®¡ç†å™¨ | `src/renderer/pages/file-manager/` | æ–‡ä»¶æµè§ˆå’Œæ“ä½œç•Œé¢ |
| å¯¹è¯æ¡†ç¤ºä¾‹ | `src/renderer/pages/dialog/` | å„ç§å¯¹è¯æ¡†ä½¿ç”¨ç¤ºä¾‹ |
| é€šä¿¡æ¡¥æ¥ | `src/renderer/bridge/` | ä¸ä¸»è¿›ç¨‹é€šä¿¡çš„æ¡¥æ¥æ¨¡å— |
| å›½é™…åŒ– | `src/renderer/i18n/` | å¤šè¯­è¨€æ”¯æŒï¼Œé»˜è®¤æ”¯æŒä¸­è‹±æ–‡ |

### é€šä¿¡ä¸é›†æˆ

| åŠŸèƒ½ | ä½ç½® | æè¿° |
|------|------|------|
| IPC äº‹ä»¶ | `src/main/ipc/` | å®šä¹‰å’Œå¤„ç†è¿›ç¨‹é—´é€šä¿¡äº‹ä»¶ |
| é¢„åŠ è½½è„šæœ¬ | `src/preload/` | å®‰å…¨åœ°æš´éœ²ä¸»è¿›ç¨‹APIç»™æ¸²æŸ“è¿›ç¨‹ |
| å…±äº«ç±»å‹ | `src/types/` | åœ¨ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹é—´å…±äº«çš„ç±»å‹å®šä¹‰ |
| å…±äº«å·¥å…· | `src/shared/` | å¯åœ¨ä¸¤ç§è¿›ç¨‹ä¸­å¤ç”¨çš„å·¥å…·å‡½æ•° |

## ğŸ”Œ æ‰©å±•åŠŸèƒ½

é™¤äº†åŸºæœ¬åŠŸèƒ½å¤–ï¼Œé¡¹ç›®è¿˜æä¾›ä»¥ä¸‹æ‰©å±•åŠŸèƒ½ï¼š

### ç½‘ç»œé€šä¿¡

- **UDPé€šä¿¡**: `src/main/network/udp/` - æä¾›UDPåè®®é€šä¿¡èƒ½åŠ›
- **WebSocket**: `src/main/network/websocket/` - æ”¯æŒWebSocketæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯

### ç³»ç»Ÿé›†æˆ

- **åè®®æ³¨å†Œ**: æ”¯æŒè‡ªå®šä¹‰URLåè®®æ‰“å¼€åº”ç”¨

